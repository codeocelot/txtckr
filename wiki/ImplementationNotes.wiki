#summary General things to bear in mind with OpenURL resolving.
#labels Phase-Design,Phase-Requirements

= Introduction =

Initially copied from <a href="http://sites.google.com/site/tompasley/Home/openurl">Tom's OpenURL notes</a>

= Details =

Multiple-keys - with PHP, I quickly learnt that you need to parse inline requests with your own string parser, as PHP5's parse_str <a href="http://us3.php.net/manual/en/function.parse-str.php#76792" target="_blank" rel="nofollow">will happily overwrite earlier name=value pairs</a> when a matching name comes along. The multiple-keys point is especially important with the info parts of an incoming request, and when these are url-encoded you can have a PMID and DOI in the same request, and give me the PubMed data over CrossRef anyday.<br><br>If you're taking XML requests, (especially POSTed data), then I'd use xpath... I initially used XSL for xml data, and then SimpleXML, but I think SimpleXML + xpath would be smarter.<br><br>Basically, the approach I used was parse to explode the inline request, (querystring), on the <font size="3"><b>&amp;</b></font> and then each pair on the <font size="3"><b>=</b></font> , and store the values in an English-named array (some of those OpenURL names are weird). If you're using arrays, then you can't use <b>rft.</b> (<i>use</i> <b>rft_ </b>) as you would with <a href="http://www.niso.org/standards/resources/Z39_88_2004.pdf" target="_blank" rel="nofollow">OpenURL 1.0</a> - I chose to rip this off the incoming request, as this also makes them more compatible with 0.1 requests - see info for SFX api <a href="http://professionalprogramming.net/openurl/blog/sfx-api/" target="_blank" rel="nofollow">here</a>. Be careful of faulty keys too - there can be spaces inserted in keys too ("e page" is an old Springer example).<br><br>Some values would end up generating more keys in the array, for example, the presence of an ISSN would make the request a journal article, as it's best to use duck typing (most vendors can't generate proper OpenURL requests - since when were patents journal articles?).